language: node_js
sudo: false
node_js:
- '10'
os:
- linux
matrix:
  include:
  - os: osx
    osx_image: xcode9.2
  - os: linux
    env: CXX=clang++
branches:
  only:
  - master
  - "/^v.*$/"
deploy:
  provider: script
  script: npm run prebuild && npm run prebuild:upload -- -u ${PREBUILD_UPLOAD}
  skip_cleanup: true
  on:
    all_branches: false
    tags: true
env:
  global:
  - secure: h/5tGbcBQ3qx8r6+BVAaGE22KBHMbT61Gb1BkBbY8MmVsSuB97s7LGEQPsJRkZIOPtyL7AF0Z//DuV9TKkmE/Uq4svA5NI04um3QaQDNks6L/Pe338BwLcj8WJHx3lHhI0QFtaS0jbpBxnss8Xrgy0bm61V/P32ogEL0UVNlxUIAcYpOW/M3sjQe/cDED/ESR5BC9iMjeHN23GWFk6mxJOur0izyue5GGarjd0f2KWfF8VViwh5gMh6/u/0RpRCyGYFrMbsNHB+xqswqmnmmQf0fj3Nomz/0Ks6LBCBOla3T/QlJLQ09jnduRpjgyA4SiVWSw8bL6Po4kR86zURpGdnGQP3/vW2bPTb/xFhyJEAfVscbpn7xCC8gIq0vBT8J/aMcDC3qxFbM8KmJ58blwl6B5ZU/71TNOneA0TY3I3rZHqiPAMhUJ+5sw8yae1/GlapRgJa9PQPkmdcwRF2FA2R563hTeKlxCHYcsdp7qigCGxNv3ojPzgAgVWDr79GQ9f2VUOtYYMVWMFSw+NZMgJYt+V1nQg8wsNKVKA6D4KX7DJ5FSdpqUOXQVBFsGdB2aGA+pnjDilybumzPNmvBAsVlIS/HukKrqYOnYtiSF3W+Vla/8Mpji81rpcCxcEY7EmgMwMXLbruNR10XwsFG+DWM0Jw3Ld1R7W9C9zCkWTs=
